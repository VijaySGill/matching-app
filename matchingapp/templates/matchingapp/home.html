<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Home</title>
	</head>
	<body>
    <h1> Successfully logged in </h1>

    <button id="logout"> Logout </button>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type = 'text/javascript'>
		$( document ).ready(function() {
			window.onload = checkLoginStatus;
			
      function authenticateUser(){
        var loggedIn = false;
        $.ajax({
           async: false,
           type: 'GET',
           url: 'authenticate/',
           dataType: 'json',
           success: function(data){
              loggedIn = data[0].success
           }
        });
        return loggedIn;
      }

      function checkLoginStatus(){
        var flag = authenticateUser();
        if(flag === false){
          returnToLogin();
        }
      }

      $("#logout").on('click', function(e){
				e.preventDefault();
        $.ajax({
          type:'POST',
          url: 'logout/',
          success: function(data){
            returnToLogin();
          }
        });
      });

      function returnToLogin(){
        window.location = '/matchingapp/loginPage';
      }
		});
    </script>
  </body>
</html>
