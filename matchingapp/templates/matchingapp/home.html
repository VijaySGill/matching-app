{% extends 'matchingapp/base.html' %}
		{% load static %}
		{% block title %}<title>Home</title>{% endblock %}
	{% block body %}<body onload="checkLoginStatus()">{% endblock %}
		{% block content %}
    <h1> Successfully logged in </h1>

    <button id="logout">Logouts</button>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type = 'text/javascript'>
      function authenticateUser(){
        var loggedIn = false;
        $.ajax({
           async: false,
           type: 'GET',
           url: '/matchingapp/authenticate/',
           dataType: 'json',
           success: function(data){
              loggedIn = data[0].success
           }
        });
        return loggedIn;
      }

      function checkLoginStatus(){
        var flag = authenticateUser();
        if(flag === false){
          returnToLogin();
        }
      }

      $(document).on('click', '#logout', function (e){
				e.preventDefault();
        $.ajax({
          type:'POST',
          url: '/matchingapp/logout/',
          success: function(data){
            returnToLogin();
          }
        });
      });

      function returnToLogin(){
        window.location = '/matchingapp/loginPage';
      }
    </script>
  </body>
	{% endblock %}
</html>
